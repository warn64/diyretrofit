{"version":3,"sources":["components/tabs.js"],"names":["dmx","Component","initialData","active","attributes","tabs","type","Array","default","String","enum","justify","methods","select","tab","this","events","Event","name","$tabs","querySelector","bootstrap","Tab","getInstance","show","render","node","document","createElement","setAttribute","addEventListener","event","set","target","getAttribute","bind","innerHTML","appendChild","update","props","equal","isArray","tabNodes","createDocumentFragment","forEach","li","button","label","textContent","tabTrigger","preventDefault","replace","classList","add","exists","find","buttons","querySelectorAll","array","remove","includes","destroy"],"mappings":"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","file":"../dmxBootstrap5Tabs/dmxBootstrap5Tabs.js","sourcesContent":["dmx.Component('bs5-tabs', {\r\n    initialData: {\r\n        /**\r\n         * @property {String} active - The active tab\r\n         */\r\n        active: null\r\n    },\r\n\r\n    attributes: {\r\n        'tabs': {\r\n            type: Array,\r\n            /**\r\n             * @property {{label: String, [target]: String}[]}\r\n             */\r\n            default: []\r\n        },\r\n\r\n        'active': {\r\n            type: String,\r\n            default: null\r\n        },\r\n\r\n        'type': {\r\n            type: String,\r\n            default: 'tabs',\r\n            enum: ['tabs', 'pills']\r\n        },\r\n\r\n        'justify': {\r\n            type: String,\r\n            default: 'left',\r\n            enum: ['left', 'center', 'right', 'fill', 'justified']\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        /**\r\n         * Select a tab\r\n         * @param {String} tab - The tab to select\r\n         */\r\n        select: function(tab) {\r\n            this.select(tab);\r\n        }\r\n    },\r\n\r\n    events: {\r\n        select: Event\r\n    },\r\n\r\n    select: function(name) {\r\n        var tab = this.$tabs.querySelector('button[name=\"' + name + '\"]');\r\n        if (tab) {\r\n            bootstrap.Tab.getInstance(tab).show();\r\n        }\r\n    },\r\n\r\n    render: function(node) {\r\n        this.$tabs = document.createElement('ul');\r\n        this.$tabs.setAttribute('class', 'nav');\r\n        this.$tabs.setAttribute('role', 'tablist');\r\n        this.$tabs.addEventListener('shown.bs.tab', function(event) {\r\n            this.set('active', event.target.getAttribute('name'));\r\n        }.bind(this));\r\n\r\n        node.innerHTML = '';\r\n        node.appendChild(this.$tabs);\r\n\r\n        this.update({});\r\n    },\r\n\r\n    update: function(props) {\r\n        if (!dmx.equal(this.props.tabs, props.tabs)) {\r\n            if (Array.isArray(this.props.tabs)) {\r\n                var tabNodes = document.createDocumentFragment();\r\n                \r\n                this.props.tabs.forEach(function(tab) {\r\n                    var li = document.createElement('li');\r\n                    li.setAttribute('class', 'nav-item');\r\n                    li.setAttribute('role', 'presentation');\r\n\r\n                    var button = document.createElement('button');\r\n                    button.setAttribute('name', tab.label);\r\n                    button.setAttribute('class', 'nav-link');\r\n                    button.setAttribute('type', 'button');\r\n                    button.setAttribute('role', 'tab');\r\n                    button.textContent = tab.label;\r\n\r\n                    var tabTrigger = new bootstrap.Tab(button);\r\n                    button.addEventListener('click', function(event) {\r\n                        event.preventDefault();\r\n                        tabTrigger.show();\r\n                    })\r\n\r\n                    if (tab.target) {\r\n                        button.setAttribute('data-bs-target', '#' + tab.target.replace(/^#/, ''));\r\n                    }\r\n\r\n                    if (tab.label == this.props.active) {\r\n                        button.classList.add('active');\r\n                        props.active = this.props.active;\r\n                    }\r\n\r\n                    li.appendChild(button);\r\n                    tabNodes.appendChild(li);\r\n                }, this);\r\n                \r\n                this.$tabs.innerHTML = '';\r\n                this.$tabs.appendChild(tabNodes);\r\n            }\r\n        }\r\n\r\n        if (!this.props.active || this.props.active != props.active) {\r\n            if (Array.isArray(this.props.tabs)) {\r\n                var active = this.props.active;\r\n                var exists = this.props.tabs.find(function(tab) { return tab.label == active });\r\n                var buttons = this.$tabs.querySelectorAll('button');\r\n\r\n                if (!exists) {\r\n                    this.props.active = this.props.tabs[0].label;\r\n                }\r\n\r\n                dmx.array(buttons).forEach(function(button) {\r\n                    if (button.getAttribute('name') == this.props.active) {\r\n                        button.classList.add('active');\r\n                        this.set('active', this.props.active);\r\n                    } else {\r\n                        button.classList.remove('active');\r\n                    }\r\n                }, this);\r\n            }\r\n        }\r\n\r\n        if (this.props.type != props.type) {\r\n            if (!['tabs', 'pills'].includes(this.props.type)) this.props.type = 'tabs';\r\n            this.$tabs.classList.remove('nav-tabs', 'nav-pills');\r\n            this.$tabs.classList.add('nav-' + this.props.type);\r\n        }\r\n\r\n        if (this.props.justify != props.justify) {\r\n            if (!['left', 'center', 'right', 'fill', 'justified'].includes(this.props.justify)) this.props.justify = 'left';\r\n            this.$tabs.classList.remove('justify-content-center', 'justify-content-end', 'nav-fill', 'nav-justified');\r\n            switch (this.props.justify) {\r\n                case 'center': this.$tabs.classList.add('justify-content-center'); break;\r\n                case 'right': this.$tabs.classList.add('justify-content-end'); break;\r\n                case 'fill': this.$tabs.classList.add('nav-fill'); break;\r\n                case 'justified': this.$tabs.classList.add('nav-justified'); break;\r\n            }\r\n        }\r\n    },\r\n\r\n    destroy: function() {\r\n\r\n    }\r\n\r\n});"]}